<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" autoReload="true">
  <targets>
    <!-- Public Site configuration -->
    <target name="asyncPublicSite" xsi:type="AsyncWrapper">
      <target name="publicSiteLog" xsi:type="File" fileName="${environment:variable=AppData}\\PUMP\\Logs\\PUMP_PublicSite.txt" layout="${message}" deleteOldFileOnStartup="false"/>
    </target>
    <target name="asyncPublicSiteVerbose" xsi:type="AsyncWrapper">
      <target name="publicSiteVerboseLog" xsi:type="File" fileName="${environment:variable=AppData}\\PUMP\\Logs\\PUMP_PublicSite_detailed.txt" layout="${date} ${logger} ${uppercase:inner=${level}} ${message}${onexception:inner=${newline}}${exception:format=ToString:innerFormat=ToString}" deleteOldFileOnStartup="false"/>
    </target>

    <!-- Admin Site configuration-->
    <target name="asyncAdminSite" xsi:type="AsyncWrapper">
      <target name="adminSiteLog" xsi:type="File" fileName="${environment:variable=AppData}\\PUMP\\Logs\\PUMP_AdminSite.txt" layout="${message}" deleteOldFileOnStartup="false"/>
    </target>
    <target name="asyncAdminSiteVerbose" xsi:type="AsyncWrapper">
      <target name="adminSiteVerboseLog" xsi:type="File" fileName="${environment:variable=AppData}\\PUMP\\Logs\\PUMP_AdminSite_detailed.txt" layout="${date} ${logger} ${uppercase:inner=${level}} ${message}${onexception:inner=${newline}}${exception:format=ToString:innerFormat=ToString}" deleteOldFileOnStartup="false"/>
    </target>

    <!-- Main configuration -->
    <target name="asyncMain" xsi:type="AsyncWrapper">
      <target name="mainLog" xsi:type="File" fileName="${environment:variable=AppData}\\PUMP\\Logs\\PUMP.txt" layout="${message}" deleteOldFileOnStartup="false"/>
    </target>
    <target name="asyncVerbose" xsi:type="AsyncWrapper">
      <target name="verboseLog" xsi:type="File" fileName="${environment:variable=AppData}\\PUMP\\Logs\\PUMP_detailed.txt" layout="${date} ${logger} ${uppercase:inner=${level}} ${message}${onexception:inner=${newline}}${exception:format=ToString:innerFormat=ToString}" deleteOldFileOnStartup="false"/>
    </target>
    <target name="asyncDebugger" xsi:type="AsyncWrapper">
        <target name="debuggerLog" xsi:type="Debugger" layout="${logger} ${uppercase:inner=${level}} ${message}${onexception:inner=${newline}}${exception:format=ToString:innerFormat=ToString}" />
    </target>
  </targets>

  <rules>
    <!--
      The rules are processed in the order they appear below. The final="true" attribute 
      on some of the rules tells NLog to stop looking for matching rules after processing 
      those rules. The scheme defined here means that logs from the public site and admin 
      site will go into separate log files.
    -->
    <logger name="*" minlevel="Info" writeTo="asyncDebugger" />
    <logger name="FGS.Pump.PublicSite.*" minlevel="Info" writeTo="asyncPublicSite" />
    <logger name="FGS.Pump.PublicSite.*" minlevel="Trace" writeTo="asyncPublicSiteVerbose" final="true" />
    <logger name="FGS.Pump.AdminSite.*" minlevel="Info" writeTo="asyncAdminSite" />
    <logger name="FGS.Pump.AdminSite.*" minlevel="Trace" writeTo="asyncAdminSiteVerbose" final="true"/>
    <logger name="*" minlevel="Info" writeTo="asyncMain" />
    <logger name="*" minlevel="Trace" writeTo="asyncVerbose" />
  </rules>
</nlog>